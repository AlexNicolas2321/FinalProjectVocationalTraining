<!-- EDITAR ROLES DE USUARIOS -->
<div class="container mt-5">
  <div class="card shadow-sm rounded-4 col-md-10 col-lg-8 mx-auto">
    <div class="card-header bg-dark text-white rounded-top-4 d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Editar Roles de Usuarios</h5>
      <button class="btn btn-light btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#usersList">
        Ver Usuarios
      </button>
    </div>

    <div class="collapse" id="usersList">
      <ul class="list-group list-group-flush">
        <li
          class="list-group-item d-flex justify-content-between align-items-start flex-column flex-md-row gap-2"
          *ngFor="let user of users"
        >
          <div class="text-break small">
            <strong>ID:</strong> {{ user.id }},
            <strong>DNI:</strong> {{ user.dni }},
            <strong>Nombre:</strong> {{ user.first_name }},
            <strong>Apellido:</strong> {{ user.last_name }},
            <strong>Roles:</strong> {{ user.roleNames }}
          </div>
          <button class="btn btn-sm btn-primary align-self-md-center" (click)="openEditRolesModal(user)">
            Editar Roles
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- MODAL EDITAR ROLES -->
<div
  class="modal fade"
  [class.show]="isModalOpen"
  [style.display]="isModalOpen ? 'block' : 'none'"
  tabindex="-1"
  role="dialog"
  aria-modal="true"
  [attr.aria-hidden]="!isModalOpen"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content shadow rounded-4">
      <div class="modal-header bg-primary text-white rounded-top-4">
        <h5 class="modal-title">Editar Roles de Usuario</h5>
        <button
          type="button"
          class="btn-close"
          aria-label="Cerrar"
          (click)="closeModal()"
        ></button>
      </div>

      <div class="modal-body">
        <form>
          <div *ngFor="let role of allRoles" class="form-check mb-2">
            <input
              class="form-check-input"
              type="checkbox"
              [id]="role.name"
              [(ngModel)]="role.selected"
              name="role_{{ role.name }}"
            />
            <label class="form-check-label" [for]="role.name">
              {{ role.name }}
            </label>
          </div>
        </form>
      </div>

      <div class="modal-footer d-flex justify-content-between">
        <button type="button" class="btn btn-outline-secondary" (click)="closeModal()">
          Cancelar
        </button>
        <button type="button" class="btn btn-success" (click)="submitEditRoles()">
          Guardar Cambios
        </button>
      </div>
    </div>
  </div>
</div>
