<div class="container d-flex justify-content-center align-items-start vh-100 mt-5">
  <div class="card shadow-lg" style="max-width: 500px; width: 100%;">
    <div class="card-body">
      <h3 class="card-title text-center mb-4">Registro de Usuario</h3>
      <form (ngSubmit)="onSubmit()" #userForm="ngForm" novalidate>

        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label">
            Correo electrónico 
          </label>
          <input
            type="email"
            id="email"
            class="form-control"
            placeholder="Email"
            [(ngModel)]="formData.email"
            name="email"
            email
            #email="ngModel"
            required
          />
          <div *ngIf="email.invalid && email.touched" class="text-danger small">
            Por favor, introduce un correo válido. 
          </div>
          
        </div>

        <!-- Password -->
        <div class="mb-3">
          <label for="password" class="form-label">
            Contraseña <span class="text-danger">*</span>
          </label>
          <input
            type="password"
            id="password"
            class="form-control"
            placeholder="Contraseña"
            [(ngModel)]="formData.password"
            name="password"
            required
            minlength="7"
            #password="ngModel"
          />
          <div *ngIf="password.invalid && password.touched" class="text-danger small">
            La contraseña debe tener al menos 7 caracteres.
          </div>
        </div>

        <!-- DNI -->
        <div class="mb-3">
          <label for="dni" class="form-label">DNI<span class="text-danger">*</span></label>
          <input
            type="text"
            id="dni"
            class="form-control"
            placeholder="DNI"
            [(ngModel)]="formData.dni"
            name="dni"
          />
        </div>

        <!-- Nombre -->
        <div class="mb-3">
          <label for="first_name" class="form-label">
            Nombre <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            id="first_name"
            class="form-control"
            placeholder="Nombre"
            [(ngModel)]="formData.first_name"
            name="first_name"
            required
          />
        </div>

        <!-- Apellido -->
        <div class="mb-3">
          <label for="last_name" class="form-label">
            Apellido <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            id="last_name"
            class="form-control"
            placeholder="Apellido"
            [(ngModel)]="formData.last_name"
            name="last_name"
            required
          />
        </div>

        <!-- Teléfono -->
        <div class="mb-3">
          <label for="phone" class="form-label">
            Teléfono <span class="text-danger">*</span>
          </label>
          <input
            type="text"
            id="phone"
            class="form-control"
            placeholder="Teléfono"
            [(ngModel)]="formData.phone"
            name="phone"
            required
          />
        </div>

        <!-- Fecha de nacimiento -->
        <div class="mb-3">
          <label for="birth_date" class="form-label">
            Fecha de nacimiento <span class="text-danger">*</span>
          </label>
          <input
            type="date"
            id="birth_date"
            class="form-control"
            [(ngModel)]="formData.birth_date"
            name="birth_date"
            #birthDate="ngModel"
            (ngModelChange)="validateBirthDate()"
            required
          />
          <div *ngIf="birthDateInvalid" class="text-danger small mt-1">
            La fecha de nacimiento no puede ser futura ni indicar más de 110 años.
          </div>
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="btn btn-primary w-100"
          [disabled]="userForm.invalid || birthDateInvalid"
        >
          Registrar
        </button>

        <!-- Feedback -->
        <div *ngIf="message" class="alert alert-success mt-3" role="alert">{{ message }}</div>
        <div *ngIf="error" class="alert alert-danger mt-3" role="alert">{{ error }}</div>
      </form>
    </div>
  </div>
</div>
